{% extends 'common/homebase.html' %}

{% block title %}Update Attendance{% endblock %}

{% block content %}
<div class="container mt-5" style="margin-left: 50px; padding-top: 65px;">
    <h2 class="text-center mb-4">Update Attendance for {{ date }}</h2>

    <form method="POST" action="{{ url_for('teacher_update_attendance', course_id=course_id, date=date) }}">
        <div class="mb-3">
            <label for="date" class="form-label">Date</label>
            <input type="date" id="date" name="date" class="form-control" value="{{ date }}" readonly>
        </div>

        <h4 class="text-center mb-3">Students</h4>
        <ul class="list-group">
            {% for student in students %}
            <li class="list-group-item d-flex align-items-center">
                {% if student.photo %}
                    <img src="{{ url_for('static', filename='uploads/' + student.photo) }}" alt="Profile" class="rounded-circle me-3" width="50" height="50">
                {% else %}
                    <img src="{{ url_for('static', filename='uploads/nophoto.jpg') }}" alt="Profile" class="rounded-circle me-3" width="50" height="50">
                {% endif %}
                
                <div>
                    <strong>{{ student.name }}</strong> (Roll No: {{ student.roll_no }})
                </div>
                
                <div class="ms-auto">
                    <input type="checkbox" id="student_{{ student.id }}" name="students_present" value="{{ student.id }}" {% if student.present %}checked{% endif %}>
                    <label for="student_{{ student.id }}">Present</label>
                </div>
            </li>
            {% endfor %}
        </ul>

        <button type="submit" class="btn btn-warning mt-3">Update Attendance</button>
    </form>
</div>
{% endblock %}
